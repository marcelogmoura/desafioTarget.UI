<div class="container mt-4">
  <h2 class="mb-4">üí∞ Calculadora de Comiss√µes</h2>

  <div class="row">
    <div class="col-md-5">
      <div class="card shadow-sm">
        <div class="card-header bg-primary text-white">
          Entrada de Vendas (JSON)
        </div>
        <div class="card-body">
          <p class="text-muted small">Cole o JSON do desafio abaixo:</p>

          <textarea
            class="form-control font-monospace"
            rows="15"
            [(ngModel)]="jsonInput">
          </textarea>

          <div *ngIf="erro" class="alert alert-danger mt-3">
            {{ erro }}
          </div>

          <button
            class="btn btn-success w-100 mt-3"
            (click)="calcular()"
            [disabled]="carregando">
            {{ carregando ? 'Calculando...' : 'Calcular Comiss√µes' }}
          </button>
        </div>
      </div>
    </div>

    <div class="col-md-7">
      <div class="card shadow-sm" *ngIf="resultados.length > 0">
        <div class="card-header bg-success text-white">
          Relat√≥rio Final
        </div>
        <div class="card-body p-0">
          <table class="table table-striped table-hover mb-0">
            <thead class="table-light">
              <tr>
                <th>Vendedor</th>
                <th class="text-end">Total Vendas</th>
                <th class="text-end">Comiss√£o a Pagar</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of resultados">
                <td><strong>{{ item.vendedor }}</strong></td>
                <td class="text-end">{{ item.totalVendas | currency:'BRL' }}</td>
                <td class="text-end text-success fw-bold">{{ item.totalComissao | currency:'BRL' }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <div *ngIf="resultados.length === 0 && !erro" class="alert alert-info mt-3">
        Clique em "Calcular" para ver o relat√≥rio processado pela API .NET.
      </div>
    </div>
  </div>
</div>
